Sunny boy RAG
=====

我们公司是一家电子元器件生产销售公司。在向全球扩张的时候，我们遇到一个关于技术标准问题：
当我们去国外竞标的时候，需要保证我们的产品能够符合国外的标准。但是国外标准很多，缺少系统的、
结构化的数据。公司希望我使用最新的AI技术解决这个问题。我认为这个场景下，定制化的 RAG
会是个不错的选择。

理由如下：

1. 我看了他国的技术规范文档，虽然不是结构化数据，但作为专业文档，格式比较统一
2. 我认为使用AI从中提取数据是可行的
3. 所以拆分技术文档，批量处理，整理成数据库应该也是可行的
4. 然后配合AI自然语言理解，从我们的技术文档中提取产品类型，生成sql查询数据

于是关于本产品，我设计的使用流程是：

1. 上传国外标准技术文档（通常是PDF）
2. 对文档进行拆分，因为文档数量巨大，几乎不可能一次性处理
3. 使用LLM逐片解析，并生成准确的数据库
4. 暂时使用本地数据库 sqlite 存储
5. 因为涉及到引用，比如：“不锈钢元器件需遵守 ABC-001 规范”，
    所以数据可能需要多轮处理
6. 开发 Web UI，提供简单的输入，然后生成 SQL，并检索结果
7. 然后通过AI生成语义化结果

构建与运行（步骤一：读取+分析+切片 PDF）
---

- 安装依赖：pnpm install
- 运行测试：pnpm test
- 对单个 PDF 执行读取/分析/切片并输出 JSON：
  pnpm ingest path/to/file.pdf > output.json

说明：
- parsePdf 会自动识别输入是否为真实 PDF；若非 PDF（如纯文本），会按单页文本处理，便于测试与调试
- buildSections 自动检测“1.”、“1.1”这类标题并按页聚合内容
- chunkSections 按 max/overlap 切片，默认 4000/200；可通过 --max 与 --overlap 调整
